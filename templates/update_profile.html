{% extends "template.html" %}

{% block title %}
Edit Profile
{% endblock title %}

{% block content %}
<!-- Tailwind CSS CDN -->
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">

<div class="min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-12 px-4 sm:px-6 lg:px-8">
    <div class="max-w-2xl mx-auto">
        <!-- Messages -->
        {% if messages %}
        <div class="space-y-4 mb-8">
            {% for message in messages %}
            <div class="p-4 bg-blue-50 border-l-4 border-blue-400 text-blue-700 rounded-lg shadow-sm">
                {{ message }}
            </div>
            {% endfor %}
        </div>
        {% endif %}

        <!-- Edit Profile Form -->
        {% if user.username == form.instance.username %}
        <form method="post" enctype="multipart/form-data" class="bg-white rounded-xl shadow-lg p-6 sm:p-8">
            {% csrf_token %}
            <fieldset class="space-y-6">
                <legend class="text-2xl font-bold text-red-600 mb-6">Edit Profile Information</legend>

                <!-- First Name -->
                <div class="space-y-2">
                    <label for="id_first_name" class="block text-sm font-medium text-gray-700">First Name</label>
                    <input type="text" name="first_name" id="id_first_name" value="{{ form.first_name.value }}"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all duration-300"
                        required>
                </div>

                <!-- Last Name -->
                <div class="space-y-2">
                    <label for="id_last_name" class="block text-sm font-medium text-gray-700">Last Name</label>
                    <input type="text" name="last_name" id="id_last_name" value="{{ form.last_name.value }}"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all duration-300"
                        required>
                </div>

                <!-- Email -->
                <div class="space-y-2">
                    <label for="id_email" class="block text-sm font-medium text-gray-700">Email</label>
                    <input type="email" name="email" id="id_email" value="{{ form.email.value }}"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all duration-300"
                        required>
                </div>

                <!-- Profile Image -->
                <div class="space-y-2">
                    <label for="id_image" class="block text-sm font-medium text-gray-700">Profile Image</label>
                    <input type="file" name="image" id="id_image"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all duration-300">
                </div>

                <!-- Change Password Link -->
                <div class="text-sm text-red-600 hover:text-red-700 transition-colors duration-300">
                    <a href="/">Change password?</a>
                </div>
            </fieldset>

            <!-- Submit Button -->
            <button type="submit"
                class="w-full mt-6 px-6 py-3 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700 transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2">
                Update
            </button>
        </form>
        {% endif %}
    </div>
</div>

<!-- Script to Hide Submit Button on Form Submission -->
<script>
    document.querySelector('form').addEventListener('submit', function () {
        document.querySelector('button[type="submit"]').style.display = 'none';
    });
</script>
{% endblock content %}
